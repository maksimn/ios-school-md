# Устройство приложений крупных банков. Приложение "Сбербанк-Онлайн".

## Архитектура в растущих и больших командах.

* Организация команд
* Улучшение скорости билда
* Модульность
* Архитектура в растущей команде.

__Feature-команды__:

`Sberbank App`

`Profile` | `Design system` | `Core` | `Payments` | `Main Screen` | `RnD AR`

У каждой фичи есть своя команда. Команда, которая делает Платежи в приложении, команда Дизайн-системы и т.д. 

У фич свои __*модули*__.

Если это всё в одном репозитории, то становится тяжело: merge-конфликты, увеличение процента крэшей приложения после изменения версии модуля, __увеличение времени билда__.

__Способы устранения этих проблем:__

* Code rules. Нужно договориться, как вы взаимодействуете у себя в команде и как - с другими командами.
* Владение модулями | Module ownership
* Синхронизация релизных циклов
* Улучшение скорости билда.

Концепция Feature teams в том, что команды должны быть изолированы, но как-то общаться будет нужно.

### Виды feature команд

1. Core teams (платформенные команды, делают общие библиотеки): `Core`, `Design System`

2. Feature teams: `Purchases`, `Profile`, `Main Screen`.

3. External teams (внешние команды на аутсорсе): `RnD AR team`.

### Code rules

* __Код стайл__ для всех команд. Определяемся с общими правилами у себя в команде. Иначе могут быть конфликты на ПР оттого что у вас просто разный код стайл (отступы).
* __Контракт между feature командами__. Определить контракты, как вы навигируетесь между фичами, как вы прокидываете какие-то зависимости и как очищаете scope'ы этих экранов.

Плюс как вы синхронизируете свои бэклоги, как общаетесь и т.д.

* __Linters__ (для автоматизации правил code style). 

Запрет пуша в dev (master). Влить в dev - нужно пройти linting, получить несколько аппрувов.

* __Список одобряемых библиотек__. Нужна синхронизация их версий.

И общий подход для решения проблем, например, многопоточности. Для этого заводится сервис документов, напр. `Confluence`, TechRadar.

* __Документация__. Чтобы можно было разобраться новому разработчику.

### Module ownership

Чтобы левый чел не мог залезть со стороны и испортить код.

Файл `CODEOWNERS` в ГитЛаб. На папочку или файл можно повесить команду.

### Release cycle synchronization.

Сборки версий модулей, хранящиеся в Nexus'e.

Nexus - это репозиторий артефактов.

---

__Frameworks__

`ATMs` (Банкоматы)

`AutoPayments`

`Authorization`

`BarcodeReader`

`Brokerage` (~Брокерство, ~Комиссии, ~Маклерство)

`Cards`

`CarLoans`

`Confirmation`

`CreditCapaciry`

`CreditCards`

`CreditHistory`

`CreditRating`

`CrowdGifting`

`CurrenciesAndMetals`

`DebitCards`

`DebugHelper`

Core и Middle фреймворки в бинарном виде, я не хочу видеть их исходный код, пока это не будет мне нужно.

