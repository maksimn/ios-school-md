## GraphQL

### Введение

Что такое __GraphQL__?
* __язык запросов__ к вашему API;
* серверная __исполняющая система__ для выполнения __запросов__ с использованием __системы типов__, через которую Вы определяете Ваши _данные_.

GraphQL не привязан к какой-либо конкретной БД или механизму хранения данных. Он может быть использован с уже имеющимся у Вас кодом и данными. GraphQL -- это расширение возможностей в сравнении с классической REST-архитектурой.

__*Служба GraphQL*__ создается посредством определения __типов__ и __полей__ для этих типов, а затем -- через предоставление __функций__ для каждого __поля__ для каждого __типа__.

__Пример__: служба GraphQL, которая возвращает текущего залогиненного пользователя и его имя

```
type Query {
  me: User
}

type User {
  id: ID
  name: String
}
```

__Функции__ для каждого __поля__ каждого __типа__:

```
function Query_me(request) {
  return request.auth.user;
}

function User_name(user) {
  return user.getName();
}
```

Если служба GraphQL исполняется (обычно как веб-служба по некоторому URL), ей могут быть отправлены __*GraphQL запросы*__ для валидации и выполнения.

Полученный __*запрос*__ проверяется на предмет того, что он ссылается только на определенные __типы__ и __поля__, а затем запускаются предоставленные __функции__ для выработки __результата запроса__.

Пример запроса:

```
{
  me {
    name
  }
}
```

Пример результата в формате JSON:

```
{
  "me": {
    "name": "Александр Абдулов"
  }
}
```
---

### Запросы и mutations

#### Поля

В простейшем смысле, GraphQL -- это __язык запросов__ конкретных __полей__ у объектов.

Пример простого запроса:

```
{
  hero {
    name
  }
}
```

```
{
  "data": {
    "hero": {
      "name": "R2-D2"
    }
  }
}
```

- запрос имеет точно такой же вид, что и его результат.

Если запрашиваемое поле является не простым типом, а объектом (или даже __*массивом объектов*__ - запрос будет выглядеть одинаково):

```
{
  hero {
    name
    friends {
      name
    }
  }
}
```
Результат:
```
{
  "data": {
    "hero": {
      "name": "R2-D2",
      "friends": [
        { "name": "Luke Skywalker" },
        { "name": "Han Solo" },
        { "name": "Leia Organa" }
      ]
    }
  }
}
```

- в одном запросе __можно извлечь полный набор связанных данных__, без необходимости нескольких запросов туда-сюда, как в обычном REST.

#### Аргументы
